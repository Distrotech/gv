2008-07-16  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/info.c: Trigger info popup on "ERROR:", too. Needed for older gs.

2008-07-12  Markus Steinborn <msteinbo@uni-paderborn.de>

	* configure.ac, src/versionp.h: Bump version to 3.6.5.90.

	* src/main.c, src/paths.h: Heuristically use Xinerama to get display
	resolution iff the current display size looks like a single monitor
	(experimental)
	
	* src/gv_message.h: Improvement of "--scale" documentation which should
	have been included in 3.6.4.91, but it has not been.

2008-07-05  Markus Steinborn <msteinbo@uni-paderborn.de>

	* configure.ac, src/versionp.h: Bump version to 3.6.5.

2008-06-22  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/options_*.c, src/resource.c: Save GV.version resource to ~/.gv,
	if GV.version in ~/.gv is missing, assume it to be "gv 3.5.2".

2008-06-21  Markus Steinborn <msteinbo@uni-paderborn.de>

	* configure.ac, src/versionp.h: Bump version to 3.6.4.91.

2008-06-18  Markus Steinborn <msteinbo@uni-paderborn.de>

	* doc/gv.texi: Update manual

	* src/gv_message.h: Update usage message
	
	* src/main_globals: Add fullscreen_p, presentation_p and ascale_p
	
	* src/main.c: Add parsing of --fullscreen and of --scale with a float and
	--presentation
	
	* src/options_gv.c: Include math.h

2008-06-17  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/callbacks.c (cb_setPagemedia): If autoresize is off and any
	special scale is used, then recalculate the scale.
	
	* src/misc.c (show_page): If autoresize is off and any
	special scale is used, display of new page is required and orientation
	or Pagemedia differs, then recalculate the scale.

2008-06-15  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/main_globals.h: New globat variable gv_ascale with the arbitraty
	scale
	
	* src/gv_user_res.dat: In gv options, enable input of arbitrary scale
	
	* src/main.c: Initialize gv_ascale
	
	* src/scale.c (scale_parseScales): Adjust parser for arbitrary scale
	 (symbolic scale factor is -2)
	 
	* src/misc.c (set_new_scale): Handle arbitrary scale
	
	* src/options_gv.c: Handle editing of arbitrary scale
	
	* src/callbacks.c(cb_setOrientation): If autoresize is off and any
	special scale is used, then recalculate the scale.

2008-06-14  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/action.c(action_shellConfigureNotify): If autoresize is turned
	off and actual scale is "Fit to window" then rescale.
	
	* src/gv_user_res.dat: New scale "Fit to window"
	
	* src/misc.c (set_new_scale): Handle "Fit to window"-scale
	
	* src/scale.c (scale_parseScales): Adjust parser to handle new
	"Fit to window"-scale (symbolic scale factor is 0.000).
	
	* src/action.c, src/gv_user_res.dat, src/misc.c, src/scale.c:
	some as above for "Fit width to window"-scale
	(symbolic scale factor is -1.000).

2008-06-13  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/main.c, src/gv_message.h, src/resource.c:  Rename infoWarnings to
	infoErrors,  likewise for resource infoVerbose

	* src/gv_font_res.dat, src/gv_layout_res.dat, src/gv_misc_res.dat:
	Entries for new setting for infoVerbose on gv options popup

	* src/options_gv.c: Visual editing of resource infoVerbose

2008-06-08  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/*.c:  include ac_config.h  first
	
	* configure.ac: Define intptr_t as preprocessor macro if necessary

2008-06-07  Markus Steinborn <msteinbo@uni-paderborn.de>

	* include inttypes.h only if HAVE_INTTYPES_H is set
	
	* src/main_resources.h: Do not use empty array size for initialized
	array of size 0 -- it makes problems with ISO C89.
	
	* configure.ac: added "--with-setenv-code"
	
	* src/setenv.[ch]: setenv emulation code
	
	* src/Makefile.am: include setenv.c if necessary

2008-06-01  Markus Steinborn <msteinbo@uni-paderborn.de>

	* configure.ac, src/versionp.h: Bump version to 3.6.4.90.
	
	* src/*: Fix warnings (patch by debian)

	* doc/Makefile.am: build doc/gv.1 by help2man if required
	
	* doc/gv.texi: Document new -widgetless switch 
	(patch by debian)
	
	* src/gv_widgetless.dat: Resource for widgetless mode (new file)
	(patch by debian)
	
	* src/gv_message.h: Document new -widgetless switch 
	(patch by debian)
	
	* src/resource.c: Handle new -widgetless switch (patch by debian)
	
	* src/main_globals: added widgetless_p	(patch by debian)
	
	* src/main.c: Parsing of "-widgetless" (patch by debian)
	
	* src/main.c(main): If no display is availabe, delay the error
	message until command line options has been parsed. This way, --help,
	--version and --usage work without having an display
	
	* src/Makefile.am: Build and clean gv_widgetless.h
	
	* src/config.h: Define FALLBACK_STYLE_2_* as "gv_widgetless.*"
	
	* src/resource.c (resource_buildDatabase): Check full pathname for
	embedded resource, not only the basename. Also embed gv_widletless.dat.

	* src/Ghostview.c, src/Ghostview.h, src/GhostviewP.h, 
	src/gv_message.h, src/main.c, src/main_globals.h,
	src/resource.c: Add handling of infoVerbose resource
	
	* src/info.c: infoPopup respects infoVerbose-Resource

2008-06-01  Markus Steinborn <msteinbo@uni-paderborn.de>

	* ChangeLog: Fixed typo in recent dates

	* configure.ac, src/versionp.h: Bump version to 3.6.4.

2008-05-23  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/stdc.h: removed (it is non-free)
	
	* src/getenv.c: likewise (it's not used in standard configuration,
	anyway)
	
	* src/setenv.c: likewise(it's not used in standard configuration,
	anyway)
	
	* src/setenv.h: likewise(it's not used in standard configuration,
	anyway)
	
	* src/Aaa.h: Do not include stdc.h.  (Patch by debian)
	
	* src/main.c: likewise (Patch by debian)
	
	* src/main.c: Redefine preprocessor macro BITMAP_ARGS (Patch by debian)
	
	* src/main_resources.h: Redefine preprocessor macro DECLARE_STRING
	(Patch by debian)
	
	* src/Makefile.am: Remove reference to src/stdc.h src/getenv.c
	src/setenv.c src/setenv.h
	
	* configure.ac: Remove option --enable-setenv-code
	
	* INSTALL: Remove description of the option --enable-setenv-code

2008-05-22  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/info.c (cb_popupInfoPopup): Revert returning when calling gs with
	the `quiet' option (should fix #23199)

	* src/main.c (main): Reverted Forcing the `XtSetArg' call to include
	XtNquiet to True
	
	* src/file.c (global): Define ENODATA as ENOMSG if ENODATA if undefined.
	Should fix compiling on GNU/kFreeBSD

2008-05-21  Markus Steinborn <msteinbo@uni-paderborn.de>

	* src/ps.c (psscan): Fixed possible uninitialized local variable
	text (remained unintialized if sscanf failes for some reason)

2008-05-21  Markus Steinborn <msteinbo@uni-paderborn.de>
	* src/dialog.c (main): Update call to resource_buildDatabase (Patch
	from debian)
	* src/resource.c (resource_buildDatabase): Update signature, fix
	handling of resources (Patch from debian)
	* src/resource.c likewise (Patch from debian)
	* src/magmenu.c (magmenu_a_magMenu): Calculation of position that is 
	not outside the screen (Patch from debian)
	* src/miscmenu.c (miscmenu_a_miscMenu): likewise (Patch from debian)
	* src/ps.c (readline): Respect nesting level of DSC headers
	BeginDocument/EndDocument (Patch from debian)
	* src/Vlist.c (PaintEntryString): Handle case that international is set
	(Patch from debian)
	* src/dialog.c (action_preferDialogPopupButton): Add 2nd
	XtInstallAccelerators (Patch from debian)
	* src/FileSel.c (global): Remove string TextField_accelerators
	(Patch from debian)
	* src/FileSel.c (Initialize): Add some XtInstallAccelerators
	(Patch from debian)
	* src/info.c (makeInfoPopup):  likewise
	* src/options_fs.c (options_fs_create): likewise
	* src/options_gs.c (options_gs_create): likewise
	* src/options_gv (options_gv_create): likewise
	* src/options_setup (options_setup_create): likewise
	* src/zoom.c (zoom_createZoom): likewise
	* src/widgets_misc.c (global): Adjust strings LineTextTr and TextTr
	for the escape key (Patch from debian)
	* src/FileSel.c (SetPreferredButton): Remove old handling of esc-key
	(Patch from debian)
	* src/gv_misc_res.dat: Update resources
	(Patch from debian)

	* src/main_resources.h: replace showTitle with titleStyle
	(Patch from Bernhard R. Link, debian)
	* src/callbacks.c (cb_showTitle): also set the titlebutton,
	depending on title_style instead of show_title
	(Patch from Bernhard R. Link, debian)
	* src/misc.h (build_label_menu): new prototype 
	(Patch from Bernhard R. Link, debian)
	* src/misc.c (setup_ghostview): move titlebutton setting code to
	cb_showTitle (Patch from Bernhard R. Link, debian)
	* src/options_setup.c: allow setting titleStyle instead of showTitle
	(Patch from Bernhard R. Link, debian)
	* src/gv_layout_res.dat: titleStyle instead of showTitle
	(Patch from Bernhard R. Link, debian)
	* src/texinfo.tex: document titleStyle
	(Patch from Bernhard R. Link, debian)

2007-06-28  Jose E. Marchesi  <jemarch@gnu.org>

	* src/ps.c (ps_gettext): Bypass trailing ')' when scanning a
	postscript string.

2007-06-28  Jose E. Marchesi  <jose.marchesi@deimos-space.com>

	* NEWS (Notation): Updated for gv 3.6.3

	* README: Updated version to 3.6.3

	* doc/gv.1: Regenerated for gv 3.6.3

	* src/Makefile.am (@echo "GV*dirs): Updated copyright notices to
	2007.

	* configure.ac: Updated version to 3.6.3

	* src/main.c (main): Call `resource_buildDatabase' to get the
	application entire resources database. Then, set that database as
	the display database.

	* src/resource.c (resource_buildDatabase): Get the display
	resources database as a parameter and take care to give it
	priority over the gv system resources. Return the entire resource
	database to the caller.

2007-06-27  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Ghostview.c (Input): Send 1023 new line characters to the
	postscript interpreter. This patch fixes bug #19870. Adapted from
	http://bugs.ghostscript.com/show_bug.cgi?id=689237

2007-06-25  Jose E. Marchesi  <jemarch@gnu.org>

	* src/misc.c (misc_setPageMarker): Correctly adjust the page
	window after PAGE-UP and PAGE-DOWN events. (Patch by Markus
	Steinborn).

	* src/Ghostview.c (GhostviewIsInterpreterRunning): Doesnt report
	the presence of a running gs interpreter if
	`ghostview.disable_start' is true. Patch from Debian.
	(StartInterpreter): Escape beginning minus characters from
	filenames. (Patch by Markus Steinborn).

	* src/Makefile.am (@echo "GV.gsArguments): Add `-dFIXEMEDIA' to
	the `GV.gsArguments' default resource. (Patch by Markus
	Steinborn).

	* src/Ghostview.c (StartInterpreter): Doesnt add the implicit
	"-g2x2" parameter to ghostscript invocation command line (patch by
	Markus Steinborn).

	* src/info.c (cb_popupInfoPopup): Return when calling gs with the
	`quiet' option (patch by John Bowman).

	* src/main.c (main): Force the `XtSetArg' call to include XtNquiet
	to True (patch by John Bowman).

	* lib/unistd.h (getcwd): New file.

	* lib/unistd_.h (if !): New file.

	* lib/Makefile.am: New file.

	* lib/gettext.h: New file.

	* lib/getopt_int.h: New file.

	* lib/getopt_.h: New file.

	* lib/getopt.c: New file.

	* lib/getopt1.c: New file.

	* lib/dummy.c: New file.

2007-03-31  Peter Breitenlohner <peb@mppmu.mpg.de>

	* src/resource.c (resource_buildDatabase): avoid segfaults when
	  reading ~/.gv as produced by State -> Setup Options -> Save

2007-03-16  Jose E. Marchesi  <jemarch@gnu.org>

	* doc/gv.texi: Fix GVERSION.

2006-07-07  Jose E. Marchesi  <jemarch@gnu.org>

	* src/ps.c: `gettext' function renamed to `ps_gettext' to avoid
	  collision with the `gettext' builtin function.

2006-05-17  Jose E. Marchesi  <jemarch@gnu.org>

	* src/gv_signal.c (signal_setSignalHandlers): Ignore the SIGINT
	signal.

2005-03-31  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Makefile.am ($(srcdir)/gv_intern_res_unix.dat): Remove
	quotes from the gs command lines in order to accomodate to the
	0000-unchequed Debian patch for quoting filenames.

2005-03-31  Jose E. Marchesi  <jemarch@dataware.es>

	* src/Ghostview.c (StartInterpreter): Added the '-2x2' argument to
	gs in order to get the correct orientation for landscape
	files. Patch by John Bowman.

	* configure.ac: Enable the scrollbar code. Solves bug #11091.

	* src/main.c (main): use getopt_long_only in order to support old
	command line arguments style.

	* doc/gv.texi (Resource files): Typo fixed
	(Displaying new versions of a document): Reference to VMS removed.
	(How can I make even more room for the image?): Subst -spartan by --spartan

	* configure.ac: The signal handler is now enabled by default,
	following the commentary on configure.ac
	Typo: enable-signal-handle -> enable-signal-handler

	* src/ps.c: Strip off the external reference to 'pdf_delaysafer_hack'
	Revert the delaysafer hack

	* src/misc.c (misc_changeFile): Strip off directories from the
	path of the file. Patch by John Bowman.

2005-01-17  Jose E. Marchesi  <jemarch@dataware.es>

	* src/ps.c: idem.

	* src/main.c: idem.

	* src/resource.c (resource_buildDatabase): Patch from FreeBSD
	ports in order to avoid gcc-dependant code: variable declaration
	only on beginning of blocks.

2004-12-31  Jose E. Marchesi  <jemarch@dataware.es>

	* src/Makefile.am (AM_CFLAGS): Use @X_CFLAGS@ from autoconf

2004-12-29  Gerald Pfeifer  <gerald@pfeifer.com>

	* src/file.c (file_fileIsNotUseful): Use EFTYPE instead of ENODATA
	if the former has been defined.

2004-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	* NEWS (Notation): Upgraded for 3.6.1

2004-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	* README: Upgraded for 3.6.1

2004-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	* configure.ac: Change reference source file on AC_INIT

2004-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	* src/gv_message.h (displayed\n\): Fixed a typo on the help message.

	* src/gv_misc_res.dat: Changed the Reopen label to Reload for the
	File menu.

	* src/Makefile.am ($(srcdir)/gv_intern_res_unix.dat): Fix
	GV.gsCmdConvPDF in order to work.

2004-12-06  Jose E. Marchesi  <jemarch@gnu.org>

	* src/main.c (main): Process GNU arguments after X initialization

2004-11-11  Jose E. Marchesi  <jemarch@dataware.es>

	* configure.ac: Changed the scratch dir from ~/ to /tmp/

2004-11-10  Jose E. Marchesi  <jemarch@dataware.es>

	* New ChangeLog

